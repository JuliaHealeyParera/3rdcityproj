---
title: "cod_chart"
author: "Project Team 2"
date: "2024-06-14"
output: html_document
---

#Load Packages

```{r}
library(tidyverse)
library(dplyr)
```

#Load Data

```{r}
agg_data <- read_csv("/Users/emilywang/3rdcityproj/data/aggregate_data.csv")
```

#Counts COD occurrences by system

```{r}
cod_comp = subset(agg_data, select = c(c_system_abbr, c_ind_cod_type))

cod_comp <- cod_comp |>
  group_by(c_system_abbr, c_ind_cod_type) |>
  mutate(n = n()) |>
  summarise(across(everything(), last))

```

#Calculates percentages

```{r}
cod_comp <- cod_comp |>
  group_by(c_system_abbr) |>
  mutate(percent = (n / sum(n)) * 100)

write.csv(cod_comp, "cod_percentages.csv")
```

